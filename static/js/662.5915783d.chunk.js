"use strict";(self.webpackChunkbr_frontend=self.webpackChunkbr_frontend||[]).push([[662],{9894:function(n,e,t){t.d(e,{Z:function(){return o}});var a={main:"Button_main__uCMI5",transparent:"Button_transparent__33FBX"},i=t(184),o=function(n){var e=n.className,t=n.type,o=void 0===t?"button":t,r=n.text,s=n.onClick,l=n.disabled,d=void 0!==l&&l;return(0,i.jsx)("button",{className:"".concat(a[e]),type:o,onClick:s||null,disabled:d,children:r})}},3263:function(n,e,t){t.d(e,{k:function(){return u}});var a=t(2982),i="Chart_container__F837V",o="Chart_chart__title__2Sd6S",r="Chart_trainigPlan__title__pR5-M",s=t(6305),l=t(9683),d=t(184);s.kL.register(s.uw,s.f$,s.od,s.jn,s.Dx,s.u,s.De);var c={id:"customLegend",afterDraw:function(n,e,t){var a,i,o=n._metasets,r=n.ctx;r.font="bold 12px Montserat",r.textBaseLine="middle",r.textAlign="center",o.forEach((function(n){r.fillStyle=n._dataset.borderColor,a=n.data[n.data.length-1].x-5*n._dataset.label.length,i=n.data[n.data.length-1].y-10,r.fillText(n._dataset.label,a,i)})),r.fillStyle="#091E3F",r.fillText("TIME",a,n.chartArea.height+23)}},u=function(n){var e=n.plan,t=n.readingStatistics,s=t.map((function(n){return n.date})),u=t.map((function(n){return n.pageAmount})),h=1===u.length?[].concat((0,a.Z)(u),(0,a.Z)(u)):u,_=Math.max.apply(Math,(0,a.Z)(h)),f=[e,e];1===s.length&&(f=[].concat((0,a.Z)(s),(0,a.Z)(s))),s.length>1&&(f=s);var m=2*e>_?2*e:_+=.1*_,g={responsive:!0,maintainAspectRatio:!1,layout:{padding:{bottom:20}},plugins:{legend:{display:!1}},scales:{x:{ticks:{display:!1}},y:{min:0===e?-5:1,max:0===e?5:m,ticks:{display:!1},grid:{display:!1}}}},x={labels:f,datasets:[{label:"PLAN",data:h.length>0?(0,a.Z)(h.map((function(n){return e}))):[e,e],backgroundColor:"#F5F7FA",borderColor:"rgb(0, 0, 0)",pointBorderColor:"rgb(0, 0, 0)",pointBorderWidth:4}]};return h.length>0&&x.datasets.push({label:"ACT",data:h,backgroundColor:"#F5F7FA",borderColor:"#FF6B08",pointBorderColor:"#FF6B08",pointBorderWidth:4,tension:.3}),(0,d.jsxs)("div",{className:i,children:[(0,d.jsxs)("p",{className:o,children:["Amont of pages / DAY"," ",(0,d.jsx)("span",{className:r,children:e})]}),(0,d.jsx)(l.x1,{options:g,data:x,plugins:[c]})]})}},3087:function(n,e,t){t.d(e,{Z:function(){return o}});var a="Container_container__VVOCq",i=t(184),o=function(n){var e=n.children;return(0,i.jsx)("div",{className:a,children:e})}},8641:function(n,e,t){t.d(e,{Z:function(){return s}});var a={containerTwoGoals:"MyGoals_containerTwoGoals__01LkU",containerThreeGoals:"MyGoals_containerThreeGoals__1EOIQ MyGoals_containerTwoGoals__01LkU MyGoals_containerTwoGoals__01LkU",allTwoGoals:"MyGoals_allTwoGoals__BdKM6",allThreeGoals:"MyGoals_allThreeGoals__RIe0G MyGoals_allTwoGoals__BdKM6",twoGoals:"MyGoals_twoGoals__5FwJw",threeGoals:"MyGoals_threeGoals__J44wd"},i=t(184),o=function(n){var e=n.header,t=n.amount;return(0,i.jsxs)("div",{className:a.twoGoals,children:[(0,i.jsx)("p",{children:t}),(0,i.jsx)("h4",{children:e})]})},r=function(n){var e=n.header,t=n.amount;return(0,i.jsxs)("div",{className:a.threeGoals,children:[(0,i.jsx)("p",{children:t}),(0,i.jsx)("h4",{children:e})]})},s=function(n){var e=n.bookAmount,t=void 0===e?0:e,s=n.daysAmount,l=void 0===s?0:s,d=n.booksLeft,c=void 0===d?0:d,u=n.showBooksLeft,h=void 0!==u&&u,_=c>0?"containerThreeGoals":"containerTwoGoals",f=h?"allThreeGoals":"allTwoGoals";return(0,i.jsxs)("div",{className:a[_],children:[(0,i.jsx)("h2",{children:"My goals"}),(0,i.jsx)("div",{className:a[f],children:h?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r,{header:"Amount of books",amount:t}),(0,i.jsx)(r,{header:"Amount of days",amount:l}),(0,i.jsx)(r,{header:"Books left",amount:c})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o,{header:"Amount of books",amount:t}),(0,i.jsx)(o,{header:"Amount of days",amount:l})]})})]})}},6640:function(n,e,t){t.d(e,{Z:function(){return r}});var a=t(6809),i=t(6580),o=t(184);function r(){return(0,o.jsx)(a.Z,{sx:{marginTop:20,display:"flex",flexDirection:"column",alignItems:"center"},children:(0,o.jsx)(i.Z,{})})}},4215:function(n,e){e.Z=function(n,e){return Math.round((new Date(e)-new Date(n))/864e5)}},97:function(n,e,t){var a=t(885),i=t(2791),o=function(){return window.innerWidth<=767};e.Z=function(){var n=(0,i.useState)(o()),e=(0,a.Z)(n,2),t=e[0],r=e[1];return(0,i.useEffect)((function(){var n=function(){r(o())};return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[]),t}},662:function(n,e,t){t.r(e),t.d(e,{default:function(){return Y}});var a=t(1413),i=t(2982),o=t(885),r=t(3087),s=t(8641),l=t(2791),d=t(5987),c=t(9513),u=t.n(c),h=t(5705),_=(t(8639),"DatePicker_dateWrapper__W5TMO"),f="DatePicker_dateInput__hpPgD",m="DatePicker_dateIcon__x6LRw",g="DatePicker_dateArrow__RSnRt",x=t(7425),p=t(6036),j=t(184),v=["onChange"],k=function(n){var e=n.onChange,t=(0,d.Z)(n,v),i=(0,h.u6)().setFieldValue,r=(0,h.U$)(t),s=(0,o.Z)(r,1)[0];return(0,j.jsxs)("div",{className:_,children:[(0,j.jsx)(u(),(0,a.Z)((0,a.Z)((0,a.Z)({className:f},s),t),{},{selected:s.value&&new Date(s.value)||null,onChange:function(n){i(s.name,n),e(n.toDateString())}})),(0,j.jsx)(x.FVH,{className:m}),(0,j.jsx)(p.dbR,{className:g})]})},T="TrainingForm_form__Qmw18",b="TrainingForm_title__LaU0d",w="TrainingForm_dateContainer__J76s1",y="TrainingForm_bookLabel__Auc77",C="TrainingForm_bookInput__HAiIW",Z="TrainingForm_btnAdd__59NTI",N="TrainingForm_selectOption__nYzXz",D=t(1724),F={startDate:"",finishDate:"",books:""},G=function(n){var e=n.onStartDateChange,t=n.onFinishDateChange,a=n.goingToReadBooks,i=n.onBtnAddClick,r=D.Ry().shape({start:D.hT().required("Enter the first day of training"),finish:D.hT().required("Enter the last day of training"),book:D.Ry().required("Choose one book")}),s=(0,l.useState)(null),d=(0,o.Z)(s,2),c=d[0],u=d[1];return(0,j.jsx)(h.J9,{initialValues:F,validationSchema:r,children:function(n){var o=n.values,r=n.handleChange;return(0,j.jsxs)(h.l0,{onChange:function(){console.log(o)},children:[(0,j.jsx)("div",{className:T,autoComplete:"off",children:(0,j.jsx)("h1",{className:b,children:" My training"})}),(0,j.jsxs)("div",{className:w,children:[(0,j.jsx)(k,{name:"start",minDate:new Date,onChange:function(n){r(n),u(n),e(n)},dateFormat:"dd-MM-yyyy",placeholderText:"Start",autoComplete:"off",required:!0}),(0,j.jsx)(h.Bc,{name:"start"}),(0,j.jsx)(k,{name:"finish",minDate:new Date(c).setDate(new Date(c).getDate()+1),maxDate:new Date(c).setDate(new Date(c).getDate()+32),onChange:t,dateFormat:"dd-MM-yyyy",placeholderText:"Finish",autoComplete:"off",required:!0}),(0,j.jsx)(h.Bc,{name:"finish"})]}),(0,j.jsxs)("div",{className:y,children:[(0,j.jsxs)(h.gN,{as:"select",name:"book",className:C,defaultValue:"default",children:[(0,j.jsx)("option",{value:"default",className:N,disabled:!0,children:"Choose books from the library"}),null===a||void 0===a?void 0:a.map((function(n){var e=n._id,t=n.bookTitle;return(0,j.jsx)("option",{value:t,children:t},e)}))]}),(0,j.jsx)(h.Bc,{name:"pages"}),(0,j.jsx)("button",{type:"button",className:Z,onClick:function(){i(a.find((function(n){return n.bookTitle===o.book})))},children:"Add"})]})]})}})},A="TrainingView_training__wyM6o",L="TrainingView_addPageBtn__Sp6RR",B="TrainingView_arrowButton__swzfL",M="TrainingView_wrapperContainer__Kf7rG",S=t(7020),E=t(3263),R={listHeader:"TrainingList_listHeader__p4fA0",header:"TrainingList_header__OXHYa",item:"TrainingList_item__cepZ5",list:"TrainingList_list__CNn7k",itemBook:"TrainingList_itemBook__EOXLL",icon:"TrainingList_icon__yYoxT",dots:"TrainingList_dots__+1OQP",author:"TrainingList_author__P-Dot",trainingWrapper:"TrainingList_trainingWrapper__FAu2J"};var P=t.p+"static/media/sprite.9a6bdf739ef0423fea6eda070916b75c.svg",V=function(n){var e=n.trainingBooks,t=(n.isActiveTraining,n.deleteBookFromList);return(0,j.jsxs)("div",{className:R.trainingWrapper,children:[(0,j.jsx)("ul",{className:R.header,children:["Title","Author","Year","Pages"].map((function(n){return(0,j.jsx)("li",{className:R.header_item,children:n},n)}))}),(0,j.jsx)("ul",{className:R.list,children:null===e||void 0===e?void 0:e.map((function(n,e){var a=n._id,i=n.bookTitle,o=n.author,r=n.amountOfPages,s=n.publicationDate;return(0,j.jsxs)("li",{className:R.item,children:[(0,j.jsxs)("p",{className:R.title,children:[(0,j.jsx)("svg",{className:R.icon,width:"22",height:"17",children:(0,j.jsx)("use",{href:"".concat(P,"#icon-grey-book")})}),i]}),(0,j.jsx)("p",{children:o}),(0,j.jsx)("p",{children:s}),(0,j.jsx)("p",{children:r})," ",(0,j.jsx)("svg",{type:"button",id:"delete_button",onClick:function(){t(a)},className:R.icon,width:"22",height:"17",children:(0,j.jsx)("use",{href:"".concat(P,"#icon-delete")})})]},e)}))})]})},I=t(4215),O=function(n){var e;return null!==(e=n.reduce((function(n,e){return n+e.amountOfPages}),0))&&void 0!==e?e:0},W=t(657),q=t(7689),J=t(6640),z=t(9894),H=t(97),U=t(9126),Y=function(){var n,e=(0,l.useState)(null),t=(0,o.Z)(e,2),d=t[0],c=t[1],u=(0,l.useState)(null),h=(0,o.Z)(u,2),_=h[0],f=h[1],m=(0,l.useState)([]),g=(0,o.Z)(m,2),x=g[0],p=g[1],v=(0,l.useState)(0),k=(0,o.Z)(v,2),T=k[0],b=k[1],w=(0,l.useState)(0),y=(0,o.Z)(w,2),C=y[0],Z=y[1],N=(0,S.jd)(),D=(0,o.Z)(N,1)[0],F=(0,l.useState)(!1),R=(0,o.Z)(F,2),P=R[0],Y=R[1],Q=(0,W.FR)(),X=Q.data,K=Q.isLoading,$=(0,q.s0)(),nn=(0,W.k0)(),en=(0,o.Z)(nn,2),tn=en[0],an=en[1].isLoading;(0,l.useEffect)((function(){X&&$("/statistics")}),[$,X]),(0,l.useEffect)((function(){d&&_&&Z((0,I.Z)(d,_))}),[_,d]),(0,l.useEffect)((function(){x.length>0&&C>0?b(Math.round(O(x)/C)):b(0)}),[x,C]);var on=(0,S.QJ)().data,rn=null!==(n=null===on||void 0===on?void 0:on.filter((function(n){return"going_to_read"===n.status})).map((function(n){return(0,a.Z)((0,a.Z)({},n),{},{isSelected:!1})})))&&void 0!==n?n:[],sn=(0,H.Z)(),ln=!!(d&&_&&x.length>0);return K?(0,j.jsx)(J.Z,{}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(r.Z,{children:(0,j.jsxs)("div",{className:A,children:[!P&&(0,j.jsx)(s.Z,{bookAmount:x.length,daysAmount:C}),(0,j.jsxs)("div",{className:M,children:[(!sn||P)&&(0,j.jsx)(G,{goingToReadBooks:rn.filter((function(n){return!x.map((function(n){return n._id})).includes(n._id)})),onStartDateChange:c,onFinishDateChange:f,onBtnAddClick:function(n){p([].concat((0,i.Z)(x),[(0,a.Z)((0,a.Z)({},n),{},{isSelected:!0})]))}}),!P&&(0,j.jsx)(V,{trainingBooks:x,deleteBookFromList:function(n){p(x.filter((function(e){return e._id!==n})))}}),P&&(0,j.jsx)(U.And,{className:B,onClick:function(){return Y(!1)}})]})]})}),(0,j.jsxs)(r.Z,{children:[ln&&!P&&(0,j.jsx)(z.Z,{id:"startTraining",className:"main",text:"Start training",onClick:function(){tn({books:x.map((function(n){return n._id})),startDate:d,finishDate:_}),x.forEach((function(n){D((0,a.Z)((0,a.Z)({},n),{},{id:n._id,status:"reading_now"}))}))},onEnded:an}),!P&&(0,j.jsx)(E.k,{plan:T,readingStatistics:[]}),sn&&(0,j.jsx)("button",{type:"button",className:L,onClick:function(){return Y(!0)},children:"+"})]})]})}}}]);
//# sourceMappingURL=662.5915783d.chunk.js.map