"use strict";(self.webpackChunkbr_frontend=self.webpackChunkbr_frontend||[]).push([[662],{9894:function(n,e,t){t.d(e,{Z:function(){return r}});var a={main:"Button_main__uCMI5",transparent:"Button_transparent__33FBX Button_main__uCMI5"},i=t(184),r=function(n){var e=n.className,t=n.type,r=void 0===t?"button":t,s=n.text,o=n.onClick,l=n.disabled,d=void 0!==l&&l,c=n.tabIndex,u=n.autoFocus;return(0,i.jsx)("button",{className:"".concat(a[e]),type:r,onClick:o||null,disabled:d,tabIndex:c,autoFocus:u,children:s})}},3263:function(n,e,t){t.d(e,{k:function(){return h}});var a=t(3433),i="Chart_container__F837V",r="Chart_chart__title__2Sd6S",s="Chart_trainigPlan__title__pR5-M",o=t(3168),l=t(6305),d=t(9683),c=t(184);l.kL.register(l.uw,l.f$,l.od,l.jn,l.Dx,l.u,l.De);var u=function(n){var e={id:"customLegend",afterDraw:function(e,t,a){var i,r,s=e._metasets,o=e.ctx;o.font="bold 12px Montserat",o.textBaseLine="middle",o.textAlign="center",s.forEach((function(n){o.fillStyle=n._dataset.borderColor,i=n.data[n.data.length-1].x-5*n._dataset.label.length,r=n.data[n.data.length-1].y-10,o.fillText(n._dataset.label,i,r)})),o.fillStyle="#091E3F",o.fillText(n("statistics.time"),i,e.chartArea.height+23)}};return e},h=function(n){var e=n.plan,t=n.readingStatistics,l=(0,o.$)().t,h=t.map((function(n){return n.date})),_=t.map((function(n){return n.pageAmount})),f=1===_.length?[].concat((0,a.Z)(_),(0,a.Z)(_)):_,m=Math.max.apply(Math,(0,a.Z)(f)),g=[e,e];1===h.length&&(g=[].concat((0,a.Z)(h),(0,a.Z)(h))),h.length>1&&(g=h);var x=2*e>m?2*e:m+=.1*m,p={responsive:!0,maintainAspectRatio:!1,layout:{padding:{bottom:20}},plugins:{legend:{display:!1}},scales:{x:{ticks:{display:!1}},y:{min:0===e?-5:1,max:0===e?5:x,ticks:{display:!1},grid:{display:!1}}}},j={labels:g,datasets:[{label:l("statistics.plan"),data:f.length>0?(0,a.Z)(f.map((function(n){return e}))):[e,e],backgroundColor:"#F5F7FA",borderColor:"rgb(0, 0, 0)",pointBorderColor:"rgb(0, 0, 0)",pointBorderWidth:4}]};return f.length>0&&j.datasets.push({label:"ACT",data:f,backgroundColor:"#F5F7FA",borderColor:"#FF6B08",pointBorderColor:"#FF6B08",pointBorderWidth:4,tension:.3}),(0,c.jsxs)("div",{className:i,children:[(0,c.jsxs)("p",{className:r,children:[l("statistics.amountPagesDay"),(0,c.jsx)("span",{className:s,children:e})]}),(0,c.jsx)(d.x1,{options:p,data:j,plugins:[u(l)]})]})}},3087:function(n,e,t){t.d(e,{Z:function(){return r}});var a="Container_container__VVOCq",i=t(184),r=function(n){var e=n.children;return(0,i.jsx)("div",{className:a,children:e})}},8641:function(n,e,t){t.d(e,{Z:function(){return l}});var a={containerTwoGoals:"MyGoals_containerTwoGoals__01LkU",containerThreeGoals:"MyGoals_containerThreeGoals__1EOIQ MyGoals_containerTwoGoals__01LkU MyGoals_containerTwoGoals__01LkU",allTwoGoals:"MyGoals_allTwoGoals__BdKM6",allThreeGoals:"MyGoals_allThreeGoals__RIe0G MyGoals_allTwoGoals__BdKM6",twoGoals:"MyGoals_twoGoals__5FwJw",threeGoals:"MyGoals_threeGoals__J44wd"},i=t(3168),r=t(184),s=function(n){var e=n.header,t=n.amount;return(0,r.jsxs)("div",{className:a.twoGoals,children:[(0,r.jsx)("p",{children:t}),(0,r.jsx)("h4",{children:e})]})},o=function(n){var e=n.header,t=n.amount;return(0,r.jsxs)("div",{className:a.threeGoals,children:[(0,r.jsx)("p",{children:t}),(0,r.jsx)("h4",{children:e})]})},l=function(n){var e=n.bookAmount,t=void 0===e?0:e,l=n.daysAmount,d=void 0===l?0:l,c=n.booksLeft,u=void 0===c?0:c,h=n.showBooksLeft,_=void 0!==h&&h,f=(0,i.$)().t,m=u>0?"containerThreeGoals":"containerTwoGoals",g=_?"allThreeGoals":"allTwoGoals";return(0,r.jsxs)("div",{className:a[m],children:[(0,r.jsx)("h2",{children:f("training.myGoals")}),(0,r.jsx)("div",{className:a[g],children:_?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o,{header:f("training.books"),amount:t}),(0,r.jsx)(o,{header:f("training.days"),amount:d}),(0,r.jsx)(o,{header:f("training.booksLeft"),amount:u})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s,{header:f("training.books"),amount:t}),(0,r.jsx)(s,{header:f("training.days"),amount:d})]})})]})}},4215:function(n,e){e.Z=function(n,e){return Math.round((new Date(e)-new Date(n))/864e5)}},97:function(n,e,t){var a=t(9439),i=t(2791),r=function(){return window.innerWidth<=767};e.Z=function(){var n=(0,i.useState)(r()),e=(0,a.Z)(n,2),t=e[0],s=e[1];return(0,i.useEffect)((function(){var n=function(){s(r())};return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[]),t}},662:function(n,e,t){t.r(e),t.d(e,{default:function(){return K}});var a=t(1413),i=t(3433),r=t(9439),s=t(2791),o=t(7689),l=t(3168),d=t(7020),c=t(657),u=t(4215),h=function(n){var e;return null!==(e=n.reduce((function(n,e){return n+e.amountOfPages}),0))&&void 0!==e?e:0},_="TrainingView_training__wyM6o",f="TrainingView_addPageBtn__Sp6RR",m="TrainingView_arrowButton__swzfL",g="TrainingView_wrapperContainer__Kf7rG",x=t(3087),p=t(8641),j=t(5987),v=t(9513),b=t.n(v),k=t(5705),y=(t(8639),"DatePicker_dateWrapper__W5TMO"),T="DatePicker_dateInput__hpPgD",w="DatePicker_dateIcon__x6LRw",C="DatePicker_dateArrow__RSnRt",Z=t(7425),N=t(6036),F=t(184),D=["onChange"],G=function(n){var e=n.onChange,t=(0,j.Z)(n,D),i=(0,k.u6)().setFieldValue,s=(0,k.U$)(t),o=(0,r.Z)(s,1)[0];return(0,F.jsxs)("div",{className:y,children:[(0,F.jsx)(b(),(0,a.Z)((0,a.Z)((0,a.Z)({className:T},o),t),{},{selected:o.value&&new Date(o.value)||null,onChange:function(n){i(o.name,n),e(n.toDateString())}})),(0,F.jsx)(Z.FVH,{className:w}),(0,F.jsx)(N.dbR,{className:C})]})},B="TrainingForm_form__Qmw18",L="TrainingForm_title__LaU0d",M="TrainingForm_dateContainer__J76s1",S="TrainingForm_bookLabel__Auc77",A="TrainingForm_bookInput__HAiIW",R="TrainingForm_btnAdd__59NTI",E="TrainingForm_selectOption__nYzXz",P=t(1724),I={startDate:"",finishDate:"",books:""},V=function(n){var e=n.onStartDateChange,t=n.onFinishDateChange,a=n.goingToReadBooks,i=n.onBtnAddClick,o=P.Ry().shape({start:P.hT().required("Enter the first day of training"),finish:P.hT().required("Enter the last day of training"),book:P.Ry().required("Choose one book")}),d=(0,l.$)().t,c=(0,s.useState)(null),u=(0,r.Z)(c,2),h=u[0],_=u[1],f=(0,s.useRef)();return(0,F.jsx)(k.J9,{initialValues:I,validationSchema:o,children:function(n){n.values;var r=n.handleChange;return(0,F.jsxs)(k.l0,{children:[(0,F.jsx)("div",{className:B,autoComplete:"off",children:(0,F.jsx)("h1",{className:L,children:d("training.myTraining")})}),(0,F.jsxs)("div",{className:M,children:[(0,F.jsx)(G,{name:"start",minDate:new Date,onChange:function(n){r(n),_(n),e(n)},dateFormat:"dd-MM-yyyy",placeholderText:d("training.start"),autoComplete:"off",required:!0}),(0,F.jsx)(k.Bc,{name:"start"}),(0,F.jsx)(G,{name:"finish",minDate:new Date(h).setDate(new Date(h).getDate()+1),maxDate:new Date(h).setDate(new Date(h).getDate()+32),onChange:t,dateFormat:"dd-MM-yyyy",placeholderText:d("training.finish"),autoComplete:"off",required:!0}),(0,F.jsx)(k.Bc,{name:"finish"})]}),(0,F.jsxs)("div",{className:S,children:[(0,F.jsxs)(k.gN,{as:"select",name:"book",className:A,defaultValue:"default",innerRef:f,children:[(0,F.jsx)("option",{value:"default",className:E,disabled:!0,children:d("training.chooseBooks")}),null===a||void 0===a?void 0:a.map((function(n){var e=n._id,t=n.bookTitle;return(0,F.jsx)("option",{value:t,children:t},e)}))]}),(0,F.jsx)(k.Bc,{name:"pages"}),(0,F.jsx)("button",{type:"button",className:R,onClick:function(){var n=f.current.value;"default"!==n&&n&&i(a.find((function(n){return n.bookTitle===f.current.value})))},children:d("library.add")})]})]})}})},W=t(3263),O={listHeader:"TrainingList_listHeader__p4fA0",header:"TrainingList_header__OXHYa",item:"TrainingList_item__cepZ5",list:"TrainingList_list__CNn7k",itemBook:"TrainingList_itemBook__EOXLL",subtitle:"TrainingList_subtitle__jNKdW",dots:"TrainingList_dots__+1OQP",author:"TrainingList_author__P-Dot",trainingWrapper:"TrainingList_trainingWrapper__FAu2J"};var $=t.p+"static/media/sprite.9a6bdf739ef0423fea6eda070916b75c.svg",q=t(97),J=function(n){var e=n.trainingBooks,t=(n.isActiveTraining,n.deleteBookFromList),a=(0,l.$)().t,i=[a("library.title"),a("library.author"),a("library.year"),a("library.pages")],r=(0,q.Z)();return(0,F.jsxs)("div",{className:O.trainingWrapper,children:[(0,F.jsx)("ul",{className:O.header,children:i.map((function(n){return(0,F.jsx)("li",{className:O.header_item,children:n},n)}))}),(0,F.jsx)("ul",{className:O.list,children:null===e||void 0===e?void 0:e.map((function(n,e){var i=n._id,s=n.bookTitle,o=n.author,l=n.amountOfPages,d=n.publicationDate;return(0,F.jsxs)("li",{className:O.item,children:[(0,F.jsx)("svg",{className:O.icon,width:"22",height:"17",children:(0,F.jsx)("use",{href:"".concat($,"#icon-grey-book")})}),(0,F.jsx)("p",{className:O.title,children:s}),(0,F.jsxs)("p",{children:[r&&(0,F.jsxs)("span",{className:O.subtitle,children:[a("library.author"),":"]}),o]}),(0,F.jsxs)("p",{children:[r&&(0,F.jsxs)("span",{className:O.subtitle,children:[a("library.year"),":"]}),d]}),(0,F.jsxs)("p",{children:[r&&(0,F.jsxs)("span",{className:O.subtitle,children:[a("library.pages"),":"]}),l]}),(0,F.jsx)("svg",{type:"button",id:"delete_button",onClick:function(){t(i)},className:O.icon,width:"22",height:"17",children:(0,F.jsx)("use",{href:"".concat($,"#icon-delete")})})]},e)}))})]})},z=t(9962),H=t(9894),U=t(9126),K=function(){var n,e=(0,s.useState)(null),t=(0,r.Z)(e,2),j=t[0],v=t[1],b=(0,s.useState)(null),k=(0,r.Z)(b,2),y=k[0],T=k[1],w=(0,s.useState)([]),C=(0,r.Z)(w,2),Z=C[0],N=C[1],D=(0,s.useState)(0),G=(0,r.Z)(D,2),B=G[0],L=G[1],M=(0,s.useState)(0),S=(0,r.Z)(M,2),A=S[0],R=S[1],E=(0,d.jd)(),P=(0,r.Z)(E,1)[0],I=(0,l.$)().t,O=(0,s.useState)(!1),$=(0,r.Z)(O,2),K=$[0],Q=$[1],X=(0,c.FR)(),Y=X.data,nn=X.isLoading,en=(0,o.s0)(),tn=(0,c.k0)(),an=(0,r.Z)(tn,2),rn=an[0],sn=an[1].isLoading;(0,s.useEffect)((function(){Y&&en("/statistics")}),[en,Y]),(0,s.useEffect)((function(){j&&y&&R((0,u.Z)(j,y))}),[y,j]),(0,s.useEffect)((function(){Z.length>0&&A>0?L(Math.round(h(Z)/A)):L(0)}),[Z,A]);var on=(0,d.QJ)().data,ln=null!==(n=null===on||void 0===on?void 0:on.filter((function(n){return"going_to_read"===n.status})).map((function(n){return(0,a.Z)((0,a.Z)({},n),{},{isSelected:!1})})))&&void 0!==n?n:[],dn=(0,q.Z)(),cn=!!(j&&y&&Z.length>0);return nn?(0,F.jsx)(z.Z,{}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(x.Z,{children:(0,F.jsxs)("div",{className:_,children:[!K&&(0,F.jsx)(p.Z,{bookAmount:Z.length,daysAmount:A}),(0,F.jsxs)("div",{className:g,children:[(!dn||K)&&(0,F.jsx)(V,{goingToReadBooks:ln.filter((function(n){return!Z.map((function(n){return n._id})).includes(n._id)})),onStartDateChange:v,onFinishDateChange:T,onBtnAddClick:function(n){N([].concat((0,i.Z)(Z),[(0,a.Z)((0,a.Z)({},n),{},{isSelected:!0})]))}}),!K&&(0,F.jsx)(J,{trainingBooks:Z,deleteBookFromList:function(n){N(Z.filter((function(e){return e._id!==n})))}}),K&&(0,F.jsx)(U.And,{className:m,onClick:function(){return Q(!1)}})]})]})}),(0,F.jsxs)(x.Z,{children:[cn&&!K&&(0,F.jsx)(H.Z,{id:"startTraining",className:"main",text:I("training.startTraining"),onClick:function(){rn({books:Z.map((function(n){return n._id})),startDate:j,finishDate:y}),Z.forEach((function(n){P((0,a.Z)((0,a.Z)({},n),{},{id:n._id,status:"reading_now"}))}))},onEnded:sn}),!K&&(0,F.jsx)(W.k,{plan:B,readingStatistics:[]}),dn&&(0,F.jsx)("button",{type:"button",className:f,onClick:function(){return Q(!0)},children:"+"})]})]})}}}]);
//# sourceMappingURL=662.ebea23a8.chunk.js.map